<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Phoenix Sepsis Criteria in sql â€¢ phoenix</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Phoenix Sepsis Criteria in sql">
<meta property="og:description" content="phoenix">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">phoenix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/phoenix.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/python.html">The Phoenix Sepsis Criteria in Python</a>
    </li>
    <li>
      <a href="../articles/sql.html">The Phoenix Sepsis Criteria in sql</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CU-DBMI-Peds/phoenix/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Phoenix Sepsis Criteria in sql</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CU-DBMI-Peds/phoenix/blob/HEAD/vignettes/sql.Rmd" class="external-link"><code>vignettes/sql.Rmd</code></a></small>
      <div class="hidden name"><code>sql.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.rchunk {
  border: 5px solid #FFFFFF;
}
.sqlchunk {
  border: 5px solid #4B8BBE;
}
</style>
<p>The following examples are provided to show how to apply the Phoenix
Sepsis criteria within an SQLite data base. We will use the same example
data set <code>sepsis</code> from the R package for the following
examples. The examples are made possible by using the following R
packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://odbc.r-dbi.org" class="external-link">odbc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CU-DBMI-Peds/phoenix/" class="external-link">phoenix</a></span><span class="op">)</span></span></code></pre></div>
<p>To help distinguish between R and sql code chunks, chunks outlined in
blue are SQL and chunks with no outline are R chunks.</p>
<p>We start in R by setting up a local example SQL database with one
table <code>sepsis</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span>drv <span class="op">=</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, dbname <span class="op">=</span> <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"sepsis"</span>, value <span class="op">=</span> <span class="va">sepsis</span><span class="op">)</span></span></code></pre></div>
<p>We can easily query the table:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> sepsis</span></code></pre></div>
<div class="knitsql-table">
<table style="width:100%;" class="table">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col width="1%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="6%">
<col width="4%">
<col width="2%">
<col width="3%">
<col width="4%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="4%">
<col width="4%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="4%">
<col width="4%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th align="left">pid</th>
<th align="right">age</th>
<th align="right">fio2</th>
<th align="right">pao2</th>
<th align="right">spo2</th>
<th align="right">vent</th>
<th align="right">gcs_total</th>
<th align="left">pupil</th>
<th align="right">platelets</th>
<th align="right">inr</th>
<th align="right">d_dimer</th>
<th align="right">fibrinogen</th>
<th align="right">dbp</th>
<th align="right">sbp</th>
<th align="right">lactate</th>
<th align="right">dobutamine</th>
<th align="right">dopamine</th>
<th align="right">epinephrine</th>
<th align="right">milrinone</th>
<th align="right">norepinephrine</th>
<th align="right">vasopressin</th>
<th align="right">glucose</th>
<th align="right">anc</th>
<th align="right">alc</th>
<th align="right">creatinine</th>
<th align="right">bilirubin</th>
<th align="right">alt</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">0.06</td>
<td align="right">0.75</td>
<td align="right">NA</td>
<td align="right">99</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">199</td>
<td align="right">1.46</td>
<td align="right">NA</td>
<td align="right">180</td>
<td align="right">40</td>
<td align="right">53</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1.03</td>
<td align="right">NA</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">201.70</td>
<td align="right">0.75</td>
<td align="right">75.3</td>
<td align="right">95</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">both-reactive</td>
<td align="right">243</td>
<td align="right">1.18</td>
<td align="right">2.45</td>
<td align="right">311</td>
<td align="right">60</td>
<td align="right">90</td>
<td align="right">3.32</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">110</td>
<td align="right">14.220</td>
<td align="right">2.220</td>
<td align="right">0.51</td>
<td align="right">0.2</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">20.80</td>
<td align="right">1.00</td>
<td align="right">49.5</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">15</td>
<td align="left">both-reactive</td>
<td align="right">49</td>
<td align="right">1.60</td>
<td align="right">NA</td>
<td align="right">309</td>
<td align="right">87</td>
<td align="right">233</td>
<td align="right">1.00</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">93</td>
<td align="right">2.210</td>
<td align="right">0.190</td>
<td align="right">0.33</td>
<td align="right">0.8</td>
<td align="right">182</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">192.50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">1.30</td>
<td align="right">2.82</td>
<td align="right">220</td>
<td align="right">57</td>
<td align="right">104</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">110</td>
<td align="right">3.184</td>
<td align="right">0.645</td>
<td align="right">0.31</td>
<td align="right">8.5</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="right">214.40</td>
<td align="right">NA</td>
<td align="right">38.7</td>
<td align="right">95</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">393</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">57</td>
<td align="right">101</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.52</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">101.20</td>
<td align="right">0.60</td>
<td align="right">69.9</td>
<td align="right">88</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">86</td>
<td align="right">1.23</td>
<td align="right">4.72</td>
<td align="right">270</td>
<td align="right">79</td>
<td align="right">119</td>
<td align="right">1.15</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">147</td>
<td align="right">20.200</td>
<td align="right">0.240</td>
<td align="right">0.77</td>
<td align="right">1.2</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="right">150.70</td>
<td align="right">0.50</td>
<td align="right">NA</td>
<td align="right">31</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">65</td>
<td align="right">3.10</td>
<td align="right">NA</td>
<td align="right">94</td>
<td align="right">11</td>
<td align="right">14</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1.47</td>
<td align="right">1.7</td>
<td align="right">3664</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="right">159.70</td>
<td align="right">0.30</td>
<td align="right">NA</td>
<td align="right">97</td>
<td align="right">1</td>
<td align="right">15</td>
<td align="left">both-reactive</td>
<td align="right">215</td>
<td align="right">0.97</td>
<td align="right">5.15</td>
<td align="right">489</td>
<td align="right">66</td>
<td align="right">112</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">100</td>
<td align="right">3.760</td>
<td align="right">1.550</td>
<td align="right">0.58</td>
<td align="right">0.5</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="right">176.10</td>
<td align="right">0.65</td>
<td align="right">51.0</td>
<td align="right">82</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">101</td>
<td align="right">1.08</td>
<td align="right">7.71</td>
<td align="right">456</td>
<td align="right">51</td>
<td align="right">117</td>
<td align="right">8.10</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">264</td>
<td align="right">8.770</td>
<td align="right">3.600</td>
<td align="right">1.23</td>
<td align="right">21.1</td>
<td align="right">151</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="right">6.60</td>
<td align="right">0.80</td>
<td align="right">NA</td>
<td align="right">76</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">292</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">58</td>
<td align="right">84</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">93</td>
<td align="right">9.084</td>
<td align="right">4.617</td>
<td align="right">0.18</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="respiratory">Respiratory<a class="anchor" aria-label="anchor" href="#respiratory"></a>
</h2>
<p>We need either create or code for the PF ratio, SF Ratio, invasive
mechanical ventilation, and other respiratory support. In the
construction of the PF ratio (pfr) and SF ratio (sfr) we replace missing
values with value that will map to a score of zero. If the percent of
inspiratory oxygen is greater than 0.21, that indicates the patient is
on some form of respiratory support.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">WITH</span> respiratory <span class="kw">AS</span> (</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    pid,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="fu">COALESCE</span>(pao2 <span class="op">/</span> fio2, <span class="dv">500</span>) <span class="kw">AS</span> pfr,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="fu">COALESCE</span>(IIF(spo2 <span class="op">&lt;=</span> <span class="dv">97</span>, spo2 <span class="op">/</span> fio2, <span class="dv">500</span>), <span class="dv">500</span>) <span class="kw">AS</span> sfr,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="fu">COALESCE</span>(vent, <span class="dv">0</span>)          <span class="kw">AS</span> imv,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    IIF(fio2 <span class="op">&gt;</span> <span class="fl">0.21</span> <span class="kw">OR</span> vent <span class="op">=</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> other_respiratory_support</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>  imv <span class="op">*</span> (IIF(pfr <span class="op">&lt;</span> <span class="dv">100</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">148</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="op">+</span> IIF(pfr <span class="op">&lt;</span> <span class="dv">200</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">220</span>, <span class="dv">1</span>, <span class="dv">0</span>) ) <span class="op">+</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>    other_respiratory_support <span class="op">*</span> IIF(pfr <span class="op">&lt;</span> <span class="dv">400</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">292</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_respiratory_score</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>  <span class="kw">FROM</span> respiratory;</span></code></pre></div>
<p>The above query was saved to an R <code>data.frame</code> called
<code>resp</code> and will be added to the virtual database for
inspection later.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"respiratory"</span>, value <span class="op">=</span> <span class="va">resp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cardiovascular">Cardiovascular<a class="anchor" aria-label="anchor" href="#cardiovascular"></a>
</h2>
<p>Missing values correspond to zero points. The combination of age and
mean arterial pressure will require both values to be know for possible
points to be assessed.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">WITH</span> vars <span class="kw">AS</span> (</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    pid,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="fu">COALESCE</span>(dobutamine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>      <span class="fu">COALESCE</span>(dopamine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>      <span class="fu">COALESCE</span>(epinephrine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>      <span class="fu">COALESCE</span>(milrinone, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>      <span class="fu">COALESCE</span>(norepinephrine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>      <span class="fu">COALESCE</span>(vasopressin, <span class="dv">0</span>) <span class="kw">AS</span> vasos,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    lactate,</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    dbp <span class="op">+</span> (sbp <span class="op">-</span> dbp) <span class="op">/</span> <span class="dv">3</span> <span class="kw">AS</span> map,</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    age</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>),</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>points <span class="kw">AS</span> (</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="op">*</span>,</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> vasos <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>         <span class="cf">WHEN</span> vasos <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> vaso_points,</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> lactate <span class="op">&gt;=</span> <span class="dv">11</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>         <span class="cf">WHEN</span> lactate <span class="op">&gt;=</span>  <span class="dv">5</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> lactate_points,</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">0</span> <span class="kw">AND</span> age <span class="op">&lt;</span>    <span class="dv">1</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">17</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">1</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">12</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">25</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">12</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">24</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">31</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">24</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">60</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">32</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">60</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">144</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">36</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span> <span class="dv">144</span> <span class="kw">AND</span> age <span class="op">&lt;=</span> <span class="dv">216</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">38</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">0</span> <span class="kw">AND</span> age <span class="op">&lt;</span>    <span class="dv">1</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">31</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">1</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">12</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">39</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">12</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">24</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">44</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">24</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">60</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">45</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">60</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">144</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">49</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span> <span class="dv">144</span> <span class="kw">AND</span> age <span class="op">&lt;=</span> <span class="dv">216</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">52</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> map_points</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>  <span class="kw">FROM</span> vars</span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>)</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>,</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>  vaso_points <span class="op">+</span> lactate_points <span class="op">+</span> map_points <span class="kw">AS</span> phoenix_cardiovascular_score</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="kw">FROM</span> points;</span></code></pre></div>
<p>The results of the above query were saved behind the scene to an R
<code>data.frame</code> called <code>card</code> which will be added to
the SQLite database for inspection later.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"cardiovascular"</span>, value <span class="op">=</span> <span class="va">card</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="coagulation">Coagulation<a class="anchor" aria-label="anchor" href="#coagulation"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">WITH</span> points <span class="kw">AS</span> (</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    pid,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> platelets <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> plts,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> inr <span class="op">&gt;</span> <span class="fl">1.3</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> inr,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> d_dimer <span class="op">&gt;</span> <span class="dv">2</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> ddm,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> fibrinogen <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> fib</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> plts <span class="op">+</span> inr <span class="op">+</span> ddm <span class="op">+</span> fib <span class="op">&gt;=</span> <span class="dv">2</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>       <span class="cf">ELSE</span> plts <span class="op">+</span> inr <span class="op">+</span> ddm <span class="op">+</span> fib <span class="cf">END</span> <span class="kw">AS</span> phoenix_coagulation_score</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="kw">FROM</span> points</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>coag</code> and will be added to the SQLite database for
inspection later.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"coagulation"</span>, value <span class="op">=</span> <span class="va">coag</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="neurologic">Neurologic<a class="anchor" aria-label="anchor" href="#neurologic"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">WITH</span> points <span class="kw">AS</span> (</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    pid,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> gcs_total <span class="op">&lt;=</span> <span class="dv">10</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> gcs,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> pupil <span class="op">=</span> <span class="ot">"both-fixed"</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> fixed_pupils</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> fixed_pupils <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>       <span class="cf">WHEN</span> gcs <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">as</span> phoenix_neurologic_score</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>  <span class="kw">FROM</span> points</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>neuro</code> and will be added to the SQLite database for
inspection later.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"neurologic"</span>, value <span class="op">=</span> <span class="va">neuro</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="endocrine">Endocrine<a class="anchor" aria-label="anchor" href="#endocrine"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  pid,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> glucose <span class="op">&lt;</span>  <span class="dv">50</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>       <span class="cf">WHEN</span> glucose <span class="op">&gt;</span> <span class="dv">150</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> phoenix_endocrine_score</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">FROM</span> sepsis</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>endo</code> and will be added to the SQLite database for
inspection later.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"endocrine"</span>, value <span class="op">=</span> <span class="va">endo</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="immunologic">Immunologic<a class="anchor" aria-label="anchor" href="#immunologic"></a>
</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  pid,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> anc <span class="op">&lt;</span>  <span class="dv">500</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>       <span class="cf">WHEN</span> alc <span class="op">&lt;</span> <span class="dv">1000</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> phoenix_immunologic_score</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="kw">FROM</span> sepsis</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>immu</code> and will be added to the SQLite database for
inspection later.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"immunologic"</span>, value <span class="op">=</span> <span class="va">immu</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="renal">Renal<a class="anchor" aria-label="anchor" href="#renal"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  pid,</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">0</span> <span class="kw">AND</span> age <span class="op">&lt;</span>    <span class="dv">1</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">0.8</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>       <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">1</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">12</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">0.3</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>       <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">12</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">24</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">0.4</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>       <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">24</span> <span class="kw">AND</span> age <span class="op">&lt;</span>   <span class="dv">60</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">0.6</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>       <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">60</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">144</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">0.7</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>       <span class="cf">WHEN</span> (age <span class="op">&gt;=</span> <span class="dv">144</span> <span class="kw">AND</span> age <span class="op">&lt;=</span> <span class="dv">216</span>) <span class="kw">AND</span> (creatinine <span class="op">&gt;=</span> <span class="fl">1.0</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> phoenix_renal_score</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="kw">FROM</span> sepsis</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>renal</code> and will be added to the SQLite database for
inspection later.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"renal"</span>, value <span class="op">=</span> <span class="va">renal</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="hepatic">Hepatic<a class="anchor" aria-label="anchor" href="#hepatic"></a>
</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  pid,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="cf">CASE</span> <span class="cf">WHEN</span> bilirubin <span class="op">&gt;=</span> <span class="dv">4</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>       <span class="cf">WHEN</span> alt <span class="op">&gt;</span> <span class="dv">102</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> phoenix_hepatic_score</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="kw">FROM</span> sepsis</span></code></pre></div>
<p>The above was stored as an R <code>data.frame</code> named
<code>hep</code> and will be added to the SQLite database for inspection
later.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"hepatic"</span>, value <span class="op">=</span> <span class="va">hep</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="phoenix">Phoenix<a class="anchor" aria-label="anchor" href="#phoenix"></a>
</h2>
<p>In R and python we provided wrappers for the total score. Here, we
will join together the results and get the totals. The results of the
following query are saved in an R <code>data.frame</code> called
<code>phoenix_scores</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  respiratory.pid <span class="kw">AS</span> pid,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  phoenix_respiratory_score,</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  phoenix_cardiovascular_score,</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  phoenix_coagulation_score,</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>  phoenix_neurologic_score,</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>  phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="kw">AS</span> phoenix_sepsis_score,</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  IIF(phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="op">&gt;=</span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_sepsis,</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>  IIF(phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="op">&gt;=</span><span class="dv">2</span> <span class="kw">AND</span> phoenix_cardiovascular_score <span class="op">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_septic_shock</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="kw">FROM</span> respiratory</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> cardiovascular</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> cardiovascular.pid</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> coagulation</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> coagulation.pid</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> neurologic</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> neurologic.pid</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phoenix_scores</span></span>
<span><span class="co">##    pid phoenix_respiratory_score phoenix_cardiovascular_score</span></span>
<span><span class="co">## 1    1                         0                            2</span></span>
<span><span class="co">## 2    2                         3                            2</span></span>
<span><span class="co">## 3    3                         3                            1</span></span>
<span><span class="co">## 4    4                         0                            0</span></span>
<span><span class="co">## 5    5                         0                            0</span></span>
<span><span class="co">## 6    6                         3                            1</span></span>
<span><span class="co">## 7    7                         3                            4</span></span>
<span><span class="co">## 8    8                         0                            0</span></span>
<span><span class="co">## 9    9                         3                            3</span></span>
<span><span class="co">## 10  10                         3                            0</span></span>
<span><span class="co">## 11  11                         3                            3</span></span>
<span><span class="co">## 12  12                         1                            0</span></span>
<span><span class="co">## 13  13                         0                            0</span></span>
<span><span class="co">## 14  14                         2                            2</span></span>
<span><span class="co">## 15  15                         3                            3</span></span>
<span><span class="co">## 16  16                         0                            2</span></span>
<span><span class="co">## 17  17                         2                            2</span></span>
<span><span class="co">## 18  18                         3                            2</span></span>
<span><span class="co">## 19  19                         2                            2</span></span>
<span><span class="co">## 20  20                         0                            1</span></span>
<span><span class="co">##    phoenix_coagulation_score phoenix_neurologic_score phoenix_sepsis_score</span></span>
<span><span class="co">## 1                          1                        0                    3</span></span>
<span><span class="co">## 2                          1                        1                    7</span></span>
<span><span class="co">## 3                          2                        0                    6</span></span>
<span><span class="co">## 4                          1                        0                    1</span></span>
<span><span class="co">## 5                          0                        0                    0</span></span>
<span><span class="co">## 6                          2                        1                    7</span></span>
<span><span class="co">## 7                          2                        0                    9</span></span>
<span><span class="co">## 8                          1                        0                    1</span></span>
<span><span class="co">## 9                          1                        1                    8</span></span>
<span><span class="co">## 10                         0                        1                    4</span></span>
<span><span class="co">## 11                         1                        2                    9</span></span>
<span><span class="co">## 12                         0                        0                    1</span></span>
<span><span class="co">## 13                         0                        0                    0</span></span>
<span><span class="co">## 14                         1                        0                    5</span></span>
<span><span class="co">## 15                         2                        0                    8</span></span>
<span><span class="co">## 16                         1                        0                    3</span></span>
<span><span class="co">## 17                         1                        0                    5</span></span>
<span><span class="co">## 18                         2                        0                    7</span></span>
<span><span class="co">## 19                         0                        0                    4</span></span>
<span><span class="co">## 20                         1                        0                    2</span></span>
<span><span class="co">##    phoenix_sepsis phoenix_septic_shock</span></span>
<span><span class="co">## 1               1                    1</span></span>
<span><span class="co">## 2               1                    1</span></span>
<span><span class="co">## 3               1                    1</span></span>
<span><span class="co">## 4               0                    0</span></span>
<span><span class="co">## 5               0                    0</span></span>
<span><span class="co">## 6               1                    1</span></span>
<span><span class="co">## 7               1                    1</span></span>
<span><span class="co">## 8               0                    0</span></span>
<span><span class="co">## 9               1                    1</span></span>
<span><span class="co">## 10              1                    0</span></span>
<span><span class="co">## 11              1                    1</span></span>
<span><span class="co">## 12              0                    0</span></span>
<span><span class="co">## 13              0                    0</span></span>
<span><span class="co">## 14              1                    1</span></span>
<span><span class="co">## 15              1                    1</span></span>
<span><span class="co">## 16              1                    1</span></span>
<span><span class="co">## 17              1                    1</span></span>
<span><span class="co">## 18              1                    1</span></span>
<span><span class="co">## 19              1                    1</span></span>
<span><span class="co">## 20              1                    1</span></span></code></pre></div>
<p>This output is the same as the output generated in R via:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phoenix_scores_from_r</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/phoenix.html">phoenix</a></span><span class="op">(</span></span>
<span>    <span class="co"># respiratory</span></span>
<span>      pf_ratio <span class="op">=</span> <span class="va">pao2</span> <span class="op">/</span> <span class="va">fio2</span>,</span>
<span>      sf_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">spo2</span> <span class="op">&lt;=</span> <span class="fl">97</span>, <span class="va">spo2</span> <span class="op">/</span> <span class="va">fio2</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>      imv <span class="op">=</span> <span class="va">vent</span>,</span>
<span>      other_respiratory_support <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">fio2</span> <span class="op">&gt;</span> <span class="fl">0.21</span><span class="op">)</span>,</span>
<span>    <span class="co"># cardiovascular</span></span>
<span>      vasoactives <span class="op">=</span> <span class="va">dobutamine</span> <span class="op">+</span> <span class="va">dopamine</span> <span class="op">+</span> <span class="va">epinephrine</span> <span class="op">+</span> <span class="va">milrinone</span> <span class="op">+</span> <span class="va">norepinephrine</span> <span class="op">+</span> <span class="va">vasopressin</span>,</span>
<span>      lactate <span class="op">=</span> <span class="va">lactate</span>,</span>
<span>      age <span class="op">=</span> <span class="va">age</span>,</span>
<span>      map <span class="op">=</span> <span class="va">dbp</span> <span class="op">+</span> <span class="op">(</span><span class="va">sbp</span> <span class="op">-</span> <span class="va">dbp</span><span class="op">)</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>    <span class="co"># coagulation</span></span>
<span>      platelets <span class="op">=</span> <span class="va">platelets</span>,</span>
<span>      inr <span class="op">=</span> <span class="va">inr</span>,</span>
<span>      d_dimer <span class="op">=</span> <span class="va">d_dimer</span>,</span>
<span>      fibrinogen <span class="op">=</span> <span class="va">fibrinogen</span>,</span>
<span>    <span class="co"># neurologic</span></span>
<span>      gcs <span class="op">=</span> <span class="va">gcs_total</span>,</span>
<span>      fixed_pupils <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">pupil</span> <span class="op">==</span> <span class="st">"both-fixed"</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">sepsis</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">phoenix_scores</span><span class="op">)</span></span>
<span><span class="co">## 'data.frame':    20 obs. of  8 variables:</span></span>
<span><span class="co">##  $ pid                         : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">##  $ phoenix_respiratory_score   : int  0 3 3 0 0 3 3 0 3 3 ...</span></span>
<span><span class="co">##  $ phoenix_cardiovascular_score: int  2 2 1 0 0 1 4 0 3 0 ...</span></span>
<span><span class="co">##  $ phoenix_coagulation_score   : int  1 1 2 1 0 2 2 1 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_neurologic_score    : int  0 1 0 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis_score        : int  3 7 6 1 0 7 9 1 8 4 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis              : int  1 1 1 0 0 1 1 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_septic_shock        : int  1 1 1 0 0 1 1 0 1 0 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">phoenix_scores_from_r</span><span class="op">)</span></span>
<span><span class="co">## 'data.frame':    20 obs. of  7 variables:</span></span>
<span><span class="co">##  $ phoenix_respiratory_score   : int  0 3 3 0 0 3 3 0 3 3 ...</span></span>
<span><span class="co">##  $ phoenix_cardiovascular_score: int  2 2 1 0 0 1 4 0 3 0 ...</span></span>
<span><span class="co">##  $ phoenix_coagulation_score   : int  1 1 2 1 0 2 2 1 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_neurologic_score    : int  0 1 0 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis_score        : int  3 7 6 1 0 7 9 1 8 4 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis              : int  1 1 1 0 0 1 1 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_septic_shock        : int  1 1 1 0 0 1 1 0 1 0 ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">phoenix_scores</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">phoenix_scores_from_r</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="phoenix-8">Phoenix 8<a class="anchor" aria-label="anchor" href="#phoenix-8"></a>
</h2>
<p>For Phoenix 8 you need only to four more organ dysfunction scores.
The result of the following query is saved as and R
<code>data.frame</code> called <code>phoenix8_scores</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  respiratory.pid <span class="kw">AS</span> pid,</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  phoenix_respiratory_score,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  phoenix_cardiovascular_score,</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>  phoenix_coagulation_score,</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  phoenix_neurologic_score,</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="kw">AS</span> phoenix_sepsis_score,</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>  IIF(phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="op">&gt;=</span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_sepsis,</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>  IIF(phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score <span class="op">&gt;=</span><span class="dv">2</span> <span class="kw">AND</span> phoenix_cardiovascular_score <span class="op">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_septic_shock,</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>  phoenix_endocrine_score,</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>  phoenix_immunologic_score,</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>  phoenix_renal_score,</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>  phoenix_hepatic_score,</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>  phoenix_respiratory_score <span class="op">+</span> phoenix_cardiovascular_score <span class="op">+</span></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>    phoenix_coagulation_score <span class="op">+</span> phoenix_neurologic_score  <span class="op">+</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>    phoenix_endocrine_score <span class="op">+</span> phoenix_immunologic_score <span class="op">+</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>    phoenix_renal_score <span class="op">+</span> phoenix_hepatic_score <span class="kw">AS</span> phoenix8_sepsis_score</span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a><span class="kw">FROM</span> respiratory</span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> cardiovascular</span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> cardiovascular.pid</span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> coagulation</span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> coagulation.pid</span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> neurologic</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> neurologic.pid</span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> endocrine</span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> endocrine.pid</span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> immunologic</span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> immunologic.pid</span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> renal</span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> renal.pid</span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> hepatic</span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a><span class="kw">ON</span> respiratory.pid <span class="op">=</span> hepatic.pid</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phoenix8_scores</span></span>
<span><span class="co">##    pid phoenix_respiratory_score phoenix_cardiovascular_score</span></span>
<span><span class="co">## 1    1                         0                            2</span></span>
<span><span class="co">## 2    2                         3                            2</span></span>
<span><span class="co">## 3    3                         3                            1</span></span>
<span><span class="co">## 4    4                         0                            0</span></span>
<span><span class="co">## 5    5                         0                            0</span></span>
<span><span class="co">## 6    6                         3                            1</span></span>
<span><span class="co">## 7    7                         3                            4</span></span>
<span><span class="co">## 8    8                         0                            0</span></span>
<span><span class="co">## 9    9                         3                            3</span></span>
<span><span class="co">## 10  10                         3                            0</span></span>
<span><span class="co">## 11  11                         3                            3</span></span>
<span><span class="co">## 12  12                         1                            0</span></span>
<span><span class="co">## 13  13                         0                            0</span></span>
<span><span class="co">## 14  14                         2                            2</span></span>
<span><span class="co">## 15  15                         3                            3</span></span>
<span><span class="co">## 16  16                         0                            2</span></span>
<span><span class="co">## 17  17                         2                            2</span></span>
<span><span class="co">## 18  18                         3                            2</span></span>
<span><span class="co">## 19  19                         2                            2</span></span>
<span><span class="co">## 20  20                         0                            1</span></span>
<span><span class="co">##    phoenix_coagulation_score phoenix_neurologic_score phoenix_sepsis_score</span></span>
<span><span class="co">## 1                          1                        0                    3</span></span>
<span><span class="co">## 2                          1                        1                    7</span></span>
<span><span class="co">## 3                          2                        0                    6</span></span>
<span><span class="co">## 4                          1                        0                    1</span></span>
<span><span class="co">## 5                          0                        0                    0</span></span>
<span><span class="co">## 6                          2                        1                    7</span></span>
<span><span class="co">## 7                          2                        0                    9</span></span>
<span><span class="co">## 8                          1                        0                    1</span></span>
<span><span class="co">## 9                          1                        1                    8</span></span>
<span><span class="co">## 10                         0                        1                    4</span></span>
<span><span class="co">## 11                         1                        2                    9</span></span>
<span><span class="co">## 12                         0                        0                    1</span></span>
<span><span class="co">## 13                         0                        0                    0</span></span>
<span><span class="co">## 14                         1                        0                    5</span></span>
<span><span class="co">## 15                         2                        0                    8</span></span>
<span><span class="co">## 16                         1                        0                    3</span></span>
<span><span class="co">## 17                         1                        0                    5</span></span>
<span><span class="co">## 18                         2                        0                    7</span></span>
<span><span class="co">## 19                         0                        0                    4</span></span>
<span><span class="co">## 20                         1                        0                    2</span></span>
<span><span class="co">##    phoenix_sepsis phoenix_septic_shock phoenix_endocrine_score</span></span>
<span><span class="co">## 1               1                    1                       0</span></span>
<span><span class="co">## 2               1                    1                       0</span></span>
<span><span class="co">## 3               1                    1                       0</span></span>
<span><span class="co">## 4               0                    0                       0</span></span>
<span><span class="co">## 5               0                    0                       0</span></span>
<span><span class="co">## 6               1                    1                       0</span></span>
<span><span class="co">## 7               1                    1                       0</span></span>
<span><span class="co">## 8               0                    0                       0</span></span>
<span><span class="co">## 9               1                    1                       1</span></span>
<span><span class="co">## 10              1                    0                       0</span></span>
<span><span class="co">## 11              1                    1                       1</span></span>
<span><span class="co">## 12              0                    0                       0</span></span>
<span><span class="co">## 13              0                    0                       0</span></span>
<span><span class="co">## 14              1                    1                       0</span></span>
<span><span class="co">## 15              1                    1                       0</span></span>
<span><span class="co">## 16              1                    1                       0</span></span>
<span><span class="co">## 17              1                    1                       0</span></span>
<span><span class="co">## 18              1                    1                       0</span></span>
<span><span class="co">## 19              1                    1                       0</span></span>
<span><span class="co">## 20              1                    1                       1</span></span>
<span><span class="co">##    phoenix_immunologic_score phoenix_renal_score phoenix_hepatic_score</span></span>
<span><span class="co">## 1                          0                   1                     0</span></span>
<span><span class="co">## 2                          1                   0                     0</span></span>
<span><span class="co">## 3                          1                   0                     1</span></span>
<span><span class="co">## 4                          1                   0                     1</span></span>
<span><span class="co">## 5                          0                   0                     0</span></span>
<span><span class="co">## 6                          1                   1                     0</span></span>
<span><span class="co">## 7                          0                   1                     1</span></span>
<span><span class="co">## 8                          1                   0                     0</span></span>
<span><span class="co">## 9                          1                   1                     1</span></span>
<span><span class="co">## 10                         1                   0                     0</span></span>
<span><span class="co">## 11                         0                   1                     0</span></span>
<span><span class="co">## 12                         0                   0                     0</span></span>
<span><span class="co">## 13                         0                   0                     0</span></span>
<span><span class="co">## 14                         0                   0                     0</span></span>
<span><span class="co">## 15                         0                   1                     1</span></span>
<span><span class="co">## 16                         1                   0                     0</span></span>
<span><span class="co">## 17                         1                   0                     0</span></span>
<span><span class="co">## 18                         0                   1                     1</span></span>
<span><span class="co">## 19                         1                   1                     0</span></span>
<span><span class="co">## 20                         1                   0                     0</span></span>
<span><span class="co">##    phoenix8_sepsis_score</span></span>
<span><span class="co">## 1                      4</span></span>
<span><span class="co">## 2                      8</span></span>
<span><span class="co">## 3                      8</span></span>
<span><span class="co">## 4                      3</span></span>
<span><span class="co">## 5                      0</span></span>
<span><span class="co">## 6                      9</span></span>
<span><span class="co">## 7                     11</span></span>
<span><span class="co">## 8                      2</span></span>
<span><span class="co">## 9                     12</span></span>
<span><span class="co">## 10                     5</span></span>
<span><span class="co">## 11                    11</span></span>
<span><span class="co">## 12                     1</span></span>
<span><span class="co">## 13                     0</span></span>
<span><span class="co">## 14                     5</span></span>
<span><span class="co">## 15                    10</span></span>
<span><span class="co">## 16                     4</span></span>
<span><span class="co">## 17                     6</span></span>
<span><span class="co">## 18                     9</span></span>
<span><span class="co">## 19                     6</span></span>
<span><span class="co">## 20                     4</span></span>
<span><span class="va">phoenix8_scores_r</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/phoenix8.html">phoenix8</a></span><span class="op">(</span></span>
<span>    <span class="co"># respiratory</span></span>
<span>      pf_ratio <span class="op">=</span> <span class="va">pao2</span> <span class="op">/</span> <span class="va">fio2</span>,</span>
<span>      sf_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">spo2</span> <span class="op">&lt;=</span> <span class="fl">97</span>, <span class="va">spo2</span> <span class="op">/</span> <span class="va">fio2</span>, <span class="cn">NA_real_</span><span class="op">)</span>,</span>
<span>      imv <span class="op">=</span> <span class="va">vent</span>,</span>
<span>      other_respiratory_support <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">fio2</span> <span class="op">&gt;</span> <span class="fl">0.21</span><span class="op">)</span>,</span>
<span>    <span class="co"># cardiovascular</span></span>
<span>      vasoactives <span class="op">=</span> <span class="va">dobutamine</span> <span class="op">+</span> <span class="va">dopamine</span> <span class="op">+</span> <span class="va">epinephrine</span> <span class="op">+</span> <span class="va">milrinone</span> <span class="op">+</span> <span class="va">norepinephrine</span> <span class="op">+</span> <span class="va">vasopressin</span>,</span>
<span>      lactate <span class="op">=</span> <span class="va">lactate</span>,</span>
<span>      age <span class="op">=</span> <span class="va">age</span>, <span class="co"># Also used in the renal assessment.</span></span>
<span>      map <span class="op">=</span> <span class="va">dbp</span> <span class="op">+</span> <span class="op">(</span><span class="va">sbp</span> <span class="op">-</span> <span class="va">dbp</span><span class="op">)</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>    <span class="co"># coagulation</span></span>
<span>      platelets <span class="op">=</span> <span class="va">platelets</span>,</span>
<span>      inr <span class="op">=</span> <span class="va">inr</span>,</span>
<span>      d_dimer <span class="op">=</span> <span class="va">d_dimer</span>,</span>
<span>      fibrinogen <span class="op">=</span> <span class="va">fibrinogen</span>,</span>
<span>    <span class="co"># neurologic</span></span>
<span>      gcs <span class="op">=</span> <span class="va">gcs_total</span>,</span>
<span>      fixed_pupils <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">pupil</span> <span class="op">==</span> <span class="st">"both-fixed"</span><span class="op">)</span>,</span>
<span>    <span class="co"># endocrine</span></span>
<span>      glucose <span class="op">=</span> <span class="va">glucose</span>,</span>
<span>    <span class="co"># immunologic</span></span>
<span>      anc <span class="op">=</span> <span class="va">anc</span>,</span>
<span>      alc <span class="op">=</span> <span class="va">alc</span>,</span>
<span>    <span class="co"># renal</span></span>
<span>      creatinine <span class="op">=</span> <span class="va">creatinine</span>,</span>
<span>      <span class="co"># no need to specify age again</span></span>
<span>    <span class="co"># hepatic</span></span>
<span>      bilirubin <span class="op">=</span> <span class="va">bilirubin</span>,</span>
<span>      alt <span class="op">=</span> <span class="va">alt</span>,</span>
<span>    data <span class="op">=</span> <span class="va">sepsis</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">phoenix8_scores</span><span class="op">)</span></span>
<span><span class="co">## 'data.frame':    20 obs. of  13 variables:</span></span>
<span><span class="co">##  $ pid                         : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">##  $ phoenix_respiratory_score   : int  0 3 3 0 0 3 3 0 3 3 ...</span></span>
<span><span class="co">##  $ phoenix_cardiovascular_score: int  2 2 1 0 0 1 4 0 3 0 ...</span></span>
<span><span class="co">##  $ phoenix_coagulation_score   : int  1 1 2 1 0 2 2 1 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_neurologic_score    : int  0 1 0 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis_score        : int  3 7 6 1 0 7 9 1 8 4 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis              : int  1 1 1 0 0 1 1 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_septic_shock        : int  1 1 1 0 0 1 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_endocrine_score     : int  0 0 0 0 0 0 0 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_immunologic_score   : int  0 1 1 1 0 1 0 1 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_renal_score         : int  1 0 0 0 0 1 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_hepatic_score       : int  0 0 1 1 0 0 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix8_sepsis_score       : int  4 8 8 3 0 9 11 2 12 5 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">phoenix8_scores_r</span><span class="op">)</span></span>
<span><span class="co">## 'data.frame':    20 obs. of  12 variables:</span></span>
<span><span class="co">##  $ phoenix_respiratory_score   : int  0 3 3 0 0 3 3 0 3 3 ...</span></span>
<span><span class="co">##  $ phoenix_cardiovascular_score: int  2 2 1 0 0 1 4 0 3 0 ...</span></span>
<span><span class="co">##  $ phoenix_coagulation_score   : int  1 1 2 1 0 2 2 1 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_neurologic_score    : int  0 1 0 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis_score        : int  3 7 6 1 0 7 9 1 8 4 ...</span></span>
<span><span class="co">##  $ phoenix_sepsis              : int  1 1 1 0 0 1 1 0 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_septic_shock        : int  1 1 1 0 0 1 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_endocrine_score     : int  0 0 0 0 0 0 0 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_immunologic_score   : int  0 1 1 1 0 1 0 1 1 1 ...</span></span>
<span><span class="co">##  $ phoenix_renal_score         : int  1 0 0 0 0 1 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix_hepatic_score       : int  0 0 1 1 0 0 1 0 1 0 ...</span></span>
<span><span class="co">##  $ phoenix8_sepsis_score       : int  4 8 8 3 0 9 11 2 12 5 ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">phoenix8_scores</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">phoenix8_scores_r</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Peter DeWitt.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
