<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Phoenix Sepsis Criteria in sql â€¢ phoenix</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Phoenix Sepsis Criteria in sql">
<meta property="og:description" content="phoenix">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">phoenix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/phoenix.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/python.html">The Phoenix Sepsis Criteria in python</a>
    </li>
    <li>
      <a href="../articles/sql.html">The Phoenix Sepsis Criteria in sql</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dewittpe/phoenix/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Phoenix Sepsis Criteria in sql</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dewittpe/phoenix/blob/HEAD/vignettes/sql.Rmd" class="external-link"><code>vignettes/sql.Rmd</code></a></small>
      <div class="hidden name"><code>sql.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.rchunk {
  border: 5px solid #FFFFFF;
}
.sqlchunk {
  border: 5px solid #4B8BBE;
}
</style>
<p>The following examples are provided to show how to apply the Phoenix
Sepsis criteria within an SQLite data base. We will use the same example
data set <code>sepsis</code> from the R package for the following
examples. The examples are made possible by using the following R
packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://odbc.r-dbi.org" class="external-link">odbc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dewittpe/phoenix/" class="external-link">phoenix</a></span><span class="op">)</span></span></code></pre></div>
<p>To help distinguish between R and sql code chunks, chunks outlined in
blue are SQL and chunks with no outline are R chunks.</p>
<p>We start in R by setting up a local example SQL database with one
table <code>sepsis</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span>drv <span class="op">=</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, dbname <span class="op">=</span> <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"sepsis"</span>, value <span class="op">=</span> <span class="va">sepsis</span><span class="op">)</span></span></code></pre></div>
<p>We can easily query the table:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> sepsis</span></code></pre></div>
<div class="knitsql-table">
<table class="table">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="6%">
<col width="4%">
<col width="2%">
<col width="3%">
<col width="5%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="5%">
<col width="4%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="5%">
<col width="4%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th align="right">age</th>
<th align="right">fio2</th>
<th align="right">pao2</th>
<th align="right">spo2</th>
<th align="right">vent</th>
<th align="right">gcs_total</th>
<th align="left">pupil</th>
<th align="right">platelets</th>
<th align="right">inr</th>
<th align="right">d_dimer</th>
<th align="right">fibrinogen</th>
<th align="right">dbp</th>
<th align="right">sbp</th>
<th align="right">lactate</th>
<th align="right">dobutamine</th>
<th align="right">dopamine</th>
<th align="right">epinephrine</th>
<th align="right">milrinone</th>
<th align="right">norepinephrine</th>
<th align="right">vasopressin</th>
<th align="right">glucose</th>
<th align="right">anc</th>
<th align="right">alc</th>
<th align="right">creatinine</th>
<th align="right">bilirubin</th>
<th align="right">alt</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.06</td>
<td align="right">0.75</td>
<td align="right">NA</td>
<td align="right">99</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">199</td>
<td align="right">1.46</td>
<td align="right">NA</td>
<td align="right">180</td>
<td align="right">40</td>
<td align="right">53</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1.03</td>
<td align="right">NA</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="right">201.70</td>
<td align="right">0.75</td>
<td align="right">75.3</td>
<td align="right">95</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">both-reactive</td>
<td align="right">243</td>
<td align="right">1.18</td>
<td align="right">2.45</td>
<td align="right">311</td>
<td align="right">60</td>
<td align="right">90</td>
<td align="right">3.32</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">110</td>
<td align="right">14.220</td>
<td align="right">2.220</td>
<td align="right">0.51</td>
<td align="right">0.2</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="right">20.80</td>
<td align="right">1.00</td>
<td align="right">49.5</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">15</td>
<td align="left">both-reactive</td>
<td align="right">49</td>
<td align="right">1.60</td>
<td align="right">NA</td>
<td align="right">309</td>
<td align="right">87</td>
<td align="right">233</td>
<td align="right">1.00</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">93</td>
<td align="right">2.210</td>
<td align="right">0.190</td>
<td align="right">0.33</td>
<td align="right">0.8</td>
<td align="right">182</td>
</tr>
<tr class="even">
<td align="right">192.50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">1.30</td>
<td align="right">2.82</td>
<td align="right">220</td>
<td align="right">57</td>
<td align="right">104</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">110</td>
<td align="right">3.184</td>
<td align="right">0.645</td>
<td align="right">0.31</td>
<td align="right">8.5</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="right">214.40</td>
<td align="right">NA</td>
<td align="right">38.7</td>
<td align="right">95</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">393</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">57</td>
<td align="right">101</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.52</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">101.20</td>
<td align="right">0.60</td>
<td align="right">69.9</td>
<td align="right">88</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">86</td>
<td align="right">1.23</td>
<td align="right">4.72</td>
<td align="right">270</td>
<td align="right">79</td>
<td align="right">119</td>
<td align="right">1.15</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">147</td>
<td align="right">20.200</td>
<td align="right">0.240</td>
<td align="right">0.77</td>
<td align="right">1.2</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="right">150.70</td>
<td align="right">0.50</td>
<td align="right">NA</td>
<td align="right">31</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="left"></td>
<td align="right">65</td>
<td align="right">3.10</td>
<td align="right">NA</td>
<td align="right">94</td>
<td align="right">11</td>
<td align="right">14</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1.47</td>
<td align="right">1.7</td>
<td align="right">3664</td>
</tr>
<tr class="even">
<td align="right">159.70</td>
<td align="right">0.30</td>
<td align="right">NA</td>
<td align="right">97</td>
<td align="right">1</td>
<td align="right">15</td>
<td align="left">both-reactive</td>
<td align="right">215</td>
<td align="right">0.97</td>
<td align="right">5.15</td>
<td align="right">489</td>
<td align="right">66</td>
<td align="right">112</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">100</td>
<td align="right">3.760</td>
<td align="right">1.550</td>
<td align="right">0.58</td>
<td align="right">0.5</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="right">176.10</td>
<td align="right">0.65</td>
<td align="right">51.0</td>
<td align="right">82</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">101</td>
<td align="right">1.08</td>
<td align="right">7.71</td>
<td align="right">456</td>
<td align="right">51</td>
<td align="right">117</td>
<td align="right">8.10</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">264</td>
<td align="right">8.770</td>
<td align="right">3.600</td>
<td align="right">1.23</td>
<td align="right">21.1</td>
<td align="right">151</td>
</tr>
<tr class="even">
<td align="right">6.60</td>
<td align="right">0.80</td>
<td align="right">NA</td>
<td align="right">76</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">both-reactive</td>
<td align="right">292</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">58</td>
<td align="right">84</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">93</td>
<td align="right">9.084</td>
<td align="right">4.617</td>
<td align="right">0.18</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="respiratory">Respiratory<a class="anchor" aria-label="anchor" href="#respiratory"></a>
</h2>
<p>We need either create or code for the PF ratio, SF Ratio, invasive
mechanical ventilation, and other respiratory support. In the
construction of the PF ratio (pfr) and SF ratio (sfr) we replace missing
values with value that will map to a score of zero. If the percent of
inspiratory oxygen is greater than 0.21, that indicates the patient is
on some form of respiratory support.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span> respiratory <span class="kw">AS</span> (</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COALESCE</span>(pao2 <span class="op">/</span> fio2, <span class="dv">500</span>) <span class="kw">AS</span> pfr,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COALESCE</span>(spo2 <span class="op">/</span> fio2, <span class="dv">500</span>) <span class="kw">AS</span> sfr,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COALESCE</span>(vent, <span class="dv">0</span>)          <span class="kw">AS</span> imv,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    IIF(fio2 <span class="op">&gt;</span> <span class="fl">0.21</span> <span class="kw">OR</span> vent <span class="op">=</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> other_respiratory_support</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  imv <span class="op">*</span> (IIF(pfr <span class="op">&lt;</span> <span class="dv">100</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">14</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="op">+</span> IIF(pfr <span class="op">&lt;</span> <span class="dv">200</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">220</span>, <span class="dv">1</span>, <span class="dv">0</span>) ) <span class="op">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    other_respiratory_support <span class="op">*</span> IIF(pfr <span class="op">&lt;</span> <span class="dv">400</span> <span class="kw">OR</span> sfr <span class="op">&lt;</span> <span class="dv">292</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="kw">AS</span> phoenix_respiratory_score</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> respiratory;</span></code></pre></div>
<p>The above query was saved to an R <code>data.frame</code> called
<code>resp</code> and will be added to the virtual database for
inspection later.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"respiratory"</span>, value <span class="op">=</span> <span class="va">resp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cardiovascular">Cardiovascular<a class="anchor" aria-label="anchor" href="#cardiovascular"></a>
</h2>
<p>Missing values correspond to zero points. The combination of age and
mean arterial pressure will require both values to be know for possible
points to be assessed.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span> vars <span class="kw">AS</span> (</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COALESCE</span>(dobutamine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">COALESCE</span>(dopamine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">COALESCE</span>(epinephrine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">COALESCE</span>(milrinone, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">COALESCE</span>(norepinephrine, <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">COALESCE</span>(vasopressin, <span class="dv">0</span>) <span class="kw">AS</span> vasos,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    lactate,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    dbp <span class="op">+</span> (<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">*</span> (sbp <span class="op">-</span> dbp) <span class="kw">AS</span> map,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    age</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> sepsis</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>points <span class="kw">AS</span> (</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> vasos <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> vasos <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> vaso_points,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> lactate <span class="op">&gt;=</span> <span class="dv">11</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> lactate <span class="op">&gt;=</span>  <span class="dv">5</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> lactate_points,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> (               age <span class="op">&lt;</span>   <span class="dv">1</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">17</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">1</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">12</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">25</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">12</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">24</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">31</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">24</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">60</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">32</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">60</span> <span class="kw">AND</span> age <span class="op">&lt;</span> <span class="dv">144</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">36</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span> <span class="dv">144</span>              ) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">38</span>) <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (               age <span class="op">&lt;</span>   <span class="dv">1</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">31</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>   <span class="dv">1</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">12</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">39</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">12</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">24</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">44</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">24</span> <span class="kw">AND</span> age <span class="op">&lt;</span>  <span class="dv">60</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">45</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span>  <span class="dv">60</span> <span class="kw">AND</span> age <span class="op">&lt;</span> <span class="dv">144</span>) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">49</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>         <span class="cf">WHEN</span> (age <span class="op">&gt;=</span> <span class="dv">144</span>              ) <span class="kw">AND</span> (map <span class="op">&lt;</span> <span class="dv">52</span>) <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>         <span class="cf">ELSE</span> <span class="dv">0</span> <span class="cf">END</span> <span class="kw">AS</span> map_points</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> vars</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  vaso_points <span class="op">+</span> lactate_points <span class="op">+</span> map_points <span class="kw">AS</span> phoenix_cardiovascular_score</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> points;</span></code></pre></div>
<p>The results of the above query were saved behind the scene to an R
<code>data.frame</code> called <code>card</code> which will be added to
the SQLite database for inspection later.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">con</span>, name <span class="op">=</span> <span class="st">"cardiovascular"</span>, value <span class="op">=</span> <span class="va">card</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="coagulation">Coagulation<a class="anchor" aria-label="anchor" href="#coagulation"></a>
</h2>
</div>
<div class="section level2">
<h2 id="neurologic">Neurologic<a class="anchor" aria-label="anchor" href="#neurologic"></a>
</h2>
</div>
<div class="section level2">
<h2 id="endocrine">Endocrine<a class="anchor" aria-label="anchor" href="#endocrine"></a>
</h2>
</div>
<div class="section level2">
<h2 id="immunologic">Immunologic<a class="anchor" aria-label="anchor" href="#immunologic"></a>
</h2>
</div>
<div class="section level2">
<h2 id="renal">Renal<a class="anchor" aria-label="anchor" href="#renal"></a>
</h2>
</div>
<div class="section level2">
<h2 id="hepatic">Hepatic<a class="anchor" aria-label="anchor" href="#hepatic"></a>
</h2>
</div>
<div class="section level2">
<h2 id="phoenix">Phoenix<a class="anchor" aria-label="anchor" href="#phoenix"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql sqlchunk"><code class="sourceCode sql"></code></pre></div>
</div>
<div class="section level2">
<h2 id="phoenix-8">Phoenix 8<a class="anchor" aria-label="anchor" href="#phoenix-8"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Peter DeWitt.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
