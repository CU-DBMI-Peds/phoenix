---
title: "Example Data Preperation and Scoring"
subtitle: "__THIS IS A WORK IN PROGRESS__"
bibliography: ../references.bib
---

In this document we will illustrate the steps, in sequence, used to prepare data
retrospective data for analysis.

Expected general structure of the data.

* There is a patient and/or encounter id
* Some element for timing is available.  In our work we used a variable called
  `eclock` for encounter-clock.  The values of `eclcok` start at 0, the time of
  admission to the facility, and increments by minutes.  The value `eclock = 5`
  is five minutes after admission.  `eclock = 1440` is 24 hours after admission.

* Not all inputs are reported at the same time.
  Last-observation-carried-forward will be used.

For this example we have the following data:


**TODO: Make the example data easy for end users to access**

```{r}
egdata <- data.table::fread("phx.csv")
str(egdata)
```

The data set contains the following variables.  Details on the expected value
ranges and use will follow as will the details on the caveats.

```{r, echo = FALSE, results = "asis"}
inputvars <- data.table::fread("inputvars.md")
kableExtra::kbl(inputvars) |>
  kableExtra::kable_styling(
    bootstrap_options = c("striped")
  )
```

* SpO~2~: Peripheral oxygen saturation (pulse ox)
  * Units: percentage
  * Expected Values: [0, 100],
    * Expect integer values 0, 1, 2, ..., 100
  * Caveats: values greater than 97 should _not_ be used for SFR
  * Look back: 6 hours

